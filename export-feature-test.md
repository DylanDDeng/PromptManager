# 🚀 新导出功能测试指南

## ✨ 新功能概览

现在的导出功能已经完全重新设计，支持：

### 🎯 选择性导出
- ✅ **选择特定提示词**：可以选择导出哪些提示词
- ✅ **版本选择**：可以选择导出特定版本的提示词
- ✅ **历史控制**：可以选择是否包含完整版本历史

### 📊 精简数据
- ✅ **只导出必要数据**：提示词 + 相关分类 + 相关标签
- ❌ **不再导出**：用户设置、元数据等无关信息

### 📁 多格式支持
- ✅ **JSON格式**：结构化数据，便于程序处理
- ✅ **Markdown格式**：人类可读，便于文档化
- ✅ **CSV格式**：表格数据，便于Excel处理

## 🧪 测试步骤

### 1. 重新加载扩展
```bash
# 在Chrome中：
# 1. 打开 chrome://extensions/
# 2. 找到 Prompt Manager 扩展
# 3. 点击刷新按钮 🔄
```

### 2. 准备测试数据

#### 创建多个测试提示词
1. 打开扩展选项页面
2. 创建以下测试提示词：

**提示词1：**
- 标题：`写作助手`
- 内容：`请帮我写一篇关于人工智能的文章`
- 分类：写作
- 标签：`写作`, `AI`

**提示词2：**
- 标题：`代码审查`
- 内容：`请审查以下代码并提供改进建议`
- 分类：编程
- 标签：`编程`, `审查`

#### 创建版本历史
1. 编辑"写作助手"提示词
2. 修改内容为：`请帮我写一篇关于人工智能的专业文章，包含最新发展趋势`
3. 保存（应该生成v1.0.1或v1.1.0）
4. 再次编辑，大幅修改内容
5. 保存（应该生成新的major版本）

### 3. 测试新导出功能

#### 打开导出对话框
1. 在设置页面，点击"导出数据"按钮
2. **验证**：应该弹出新的导出对话框，而不是直接下载文件

#### 测试提示词选择
1. **查看提示词列表**：
   - ✅ 显示所有提示词
   - ✅ 显示当前版本号
   - ✅ 显示标签预览
   - ✅ 显示选择计数

2. **测试选择功能**：
   - 点击单个提示词的复选框
   - 点击"全选"按钮
   - 点击"取消全选"按钮
   - **验证**：选择状态正确更新

#### 测试版本选择功能
1. 选择有版本历史的提示词（如"写作助手"）
2. 展开该提示词的详细选项
3. **测试包含历史选项**：
   - ✅ 默认勾选"包含完整版本历史"
   - ✅ 取消勾选后显示版本选择下拉框
   - ✅ 可以选择特定版本

4. **测试内容预览**：
   - ✅ 显示提示词内容预览
   - ✅ 长内容被截断并显示"..."

### 4. 测试导出格式

#### JSON格式导出
1. 选择1-2个提示词
2. 选择"JSON"格式
3. 点击"导出"按钮
4. **验证下载的文件**：
   - 文件名：`prompt-manager-export-YYYY-MM-DD.json`
   - 内容结构：
     ```json
     {
       "prompts": [...],
       "categories": [...],
       "tags": [...],
       "exportInfo": {
         "format": "json",
         "exportedAt": "...",
         "totalItems": 2
       }
     }
     ```

#### Markdown格式导出
1. 选择相同的提示词
2. 选择"Markdown"格式
3. 点击"导出"按钮
4. **验证下载的文件**：
   - 文件名：`prompt-manager-export-YYYY-MM-DD.md`
   - 内容包含：
     - 导出信息头部
     - 分类列表
     - 标签列表
     - 格式化的提示词内容
     - 版本历史（如果包含）

#### CSV格式导出
1. 选择相同的提示词
2. 选择"CSV"格式
3. 点击"导出"按钮
4. **验证下载的文件**：
   - 文件名：`prompt-manager-export-YYYY-MM-DD.csv`
   - 可以用Excel打开
   - 包含列：ID, Title, Content, Description, Category, Tags, Version, Created At, Usage Count, Is Favorite

### 5. 测试高级功能

#### 特定版本导出
1. 选择有版本历史的提示词
2. 取消"包含完整版本历史"
3. 选择特定版本（如v1.0.0）
4. 导出为JSON格式
5. **验证**：
   - 导出的内容是选定版本的内容
   - 包含`exportedVersion`和`originalVersion`元数据

#### 只导出相关数据
1. 选择来自不同分类的提示词
2. 导出为JSON格式
3. **验证**：
   - `categories`数组只包含被选中提示词使用的分类
   - `tags`数组只包含被选中提示词使用的标签
   - 没有用户设置和其他元数据

### 6. 测试边界情况

#### 空选择
1. 不选择任何提示词
2. **验证**：导出按钮应该被禁用

#### 大量数据
1. 如果有很多提示词，测试性能
2. **验证**：对话框滚动正常，选择响应及时

#### 特殊字符
1. 创建包含特殊字符的提示词（如引号、逗号、换行）
2. 导出为CSV格式
3. **验证**：特殊字符被正确转义

## 🎯 预期结果

### 用户体验改进
- ✅ **更灵活**：可以选择导出什么
- ✅ **更精确**：可以导出特定版本
- ✅ **更实用**：支持多种格式
- ✅ **更清晰**：只导出相关数据

### 文件对比

#### 旧导出（完整备份）
```
prompt-manager-backup-2024-01-15.json (可能很大)
包含：所有数据 + 设置 + 元数据
```

#### 新导出（选择性）
```
prompt-manager-export-2024-01-15.json (精简)
prompt-manager-export-2024-01-15.md (可读)
prompt-manager-export-2024-01-15.csv (表格)
只包含：选中的提示词 + 相关分类 + 相关标签
```

## 🐛 如果遇到问题

### 对话框不显示
1. 检查浏览器控制台错误
2. 确认扩展正确重新加载

### 导出失败
1. 检查是否选择了提示词
2. 查看控制台错误信息

### 文件格式问题
1. 确认选择了正确的导出格式
2. 检查文件扩展名是否正确

现在你有了一个功能强大且灵活的导出系统！🎉
